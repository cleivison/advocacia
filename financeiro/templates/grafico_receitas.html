{% extends "base_sistema.html" %}
{% load static %}
{% block title %}
    Receitas
{% endblock title %}
{% block js %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.bundle.js"></script>
    <script src="{% static "js/utils.js" %}"type="text/javascript"></script>
{% endblock %}
{% block conteudo %}
<div class="container-fluid">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title text-center"><i class="fa fa-bar-chart"></i> Graficos de Receitas</h3>    
            </div>
            <div class="panel-body ">
                <div id="container" style="width: 100%;">
                <canvas id="canvas"></canvas>
                </div>
                <script>
                        var MONTHS = ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"];
                    var color = Chart.helpers.color;
                   /* var names = JSON.parse('{{ names|safe }}');*/
                   

                    /*contas a receber*/
                    var receber_janeiro = JSON.parse('{{ receber_janeiro|safe }}');
                    var receber_fevereiro = JSON.parse('{{ receber_fevereiro|safe }}');
                    var receber_marco = JSON.parse('{{ receber_marco|safe }}');
                    var receber_abril = JSON.parse('{{ receber_abril|safe }}');
                    var receber_maio = JSON.parse('{{ receber_maio|safe }}');
                    var receber_junho = JSON.parse('{{ receber_junho|safe }}');
                    var receber_julho = JSON.parse('{{ receber_julho|safe }}');
                    var receber_agosto = JSON.parse('{{ receber_agosto|safe }}');
                    var receber_setembro = JSON.parse('{{ receber_setembro|safe }}');
                    var receber_outubro = JSON.parse('{{receber_outubro|safe }}');
                    var receber_novembro = JSON.parse('{{ receber_novembro|safe }}');
                    var receber_dezembro = JSON.parse('{{ receber_dezembro|safe }}');
                    
                    /*contas a pagar */
                    var janeiro = JSON.parse('{{ janeiro|safe }}');
                    var fevereiro = JSON.parse('{{ fevereiro|safe }}');
                    var marco = JSON.parse('{{ marco|safe }}');
                    var abril = JSON.parse('{{ abril|safe }}');
                    var maio = JSON.parse('{{ maio|safe }}');
                    var junho = JSON.parse('{{ junho|safe }}');
                    var julho = JSON.parse('{{ julho|safe }}');
                    var agosto = JSON.parse('{{ agosto|safe }}');
                    var setembro = JSON.parse('{{ setembro|safe }}');
                    var outubro = JSON.parse('{{outubro|safe }}');
                    var novembro = JSON.parse('{{ novembro|safe }}');
                    var dezembro = JSON.parse('{{ dezembro|safe }}');

                    /*saldo*/
                    var saldo_jan = JSON.parse('{{ saldo_jan|safe }}');
                    var saldo_fev = JSON.parse('{{ saldo_fev|safe }}');
                    var saldo_mar = JSON.parse('{{ saldo_mar|safe }}');
                    var saldo_abr = JSON.parse('{{ saldo_abr|safe }}');
                    var saldo_mai = JSON.parse('{{ saldo_mai|safe }}');
                    var saldo_jun = JSON.parse('{{ saldo_jun|safe }}');
                    var saldo_jul = JSON.parse('{{ saldo_jul|safe }}');
                    var saldo_ago = JSON.parse('{{ saldo_ago|safe }}');
                    var saldo_setb = JSON.parse('{{ saldo_setb|safe }}');
                    var saldo_out = JSON.parse('{{ saldo_out|safe }}');
                    var saldo_nov = JSON.parse('{{ saldo_nov|safe }}');
                    var saldo_dez = JSON.parse('{{ saldo_dez|safe }}');

                    var barChartData = {
                        labels: ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho","Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"],
                        datasets: [{
                            label: 'Contas á Receber',
                            backgroundColor: color(window.chartColors.green).alpha(0.5).rgbString(),
                            borderColor: window.chartColors.green,
                            borderWidth: 1,
                            data: [
                                receber_janeiro,
                                receber_fevereiro,
                                receber_marco,
                                receber_abril,
                                receber_maio,
                                receber_junho,
                                receber_julho,
                                receber_agosto,
                                receber_setembro,
                                receber_outubro,
                                receber_novembro,
                                receber_dezembro,
                            ]
                        }, {
                            label: 'Contas á Pagar',
                            backgroundColor: color(window.chartColors.red).alpha(0.5).rgbString(),
                            borderColor: window.chartColors.red,
                            borderWidth: 1,
                            data: [
                                janeiro,
                                fevereiro,
                                marco,
                                abril,
                                maio,
                                junho,
                                julho,
                                agosto,
                                setembro,
                                outubro,
                                novembro,
                                dezembro,
                            ]
                           
                        }
                        ,{
                            label: 'Saldo',
                            backgroundColor: color(window.chartColors.blue).alpha(0.5).rgbString(),
                            borderColor: window.chartColors.blue,
                            borderWidth: 1,
                            data: [
                                saldo_jan,
                                saldo_fev,
                                saldo_mar,
                                saldo_abr,
                                saldo_mai,
                                saldo_jun,
                                saldo_jul,
                                saldo_ago,
                                saldo_setb,
                                saldo_out,
                                saldo_nov,
                                saldo_dez,
                            ]
                           
                        }]

                    };

                    window.onload = function() {
                        var ctx = document.getElementById("canvas").getContext("2d");
                        window.myBar = new Chart(ctx, {
                            type: 'bar',
                            data: barChartData,
                            options: {
                                responsive: true,
                                legend: {
                                    position: 'top',
                                },
                                title: {
                                    display: true,
                                    text: 'Receitas Mensais'
                                }
                            }
                        });

                    };

                </script>
            </div>
        </div>
    </div>
{% endblock %}
